<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PhoneCam â€” Your Phone as a Webcam</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,600;1,400&family=DM+Sans:wght@300;400;500;600&family=DM+Mono&display=swap" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:          #f5f0e8;
      --bg-warm:     #ede8df;
      --surface:     #faf7f2;
      --border:      #ddd8ce;
      --border-dark: #c8c0b2;
      --text:        #2c2416;
      --text-mid:    #6b5f4e;
      --text-dim:    #9e9286;
      --accent:      #b5651d;
      --accent-light:#d4854a;
      --accent-bg:   #f7ece0;
      --green:       #4a7c59;
      --green-bg:    #eaf2ec;
      --red:         #9b3a2e;
      --red-bg:      #f7ecea;
      --serif:       'Lora', Georgia, serif;
      --sans:        'DM Sans', system-ui, sans-serif;
      --mono:        'DM Mono', monospace;
    }

    html { scroll-behavior: smooth; }
    body { background: var(--bg); color: var(--text); font-family: var(--sans); font-size: 15px; line-height: 1.6; overflow-x: hidden; }

    /* â”€â”€ HEADER â”€â”€ */
    header {
      position: sticky; top: 0; z-index: 200;
      background: rgba(245,240,232,0.92);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border);
      padding: 0 40px; height: 60px;
      display: flex; align-items: center; justify-content: space-between;
    }
    .logo { font-family: var(--serif); font-size: 1.3rem; font-weight: 600; color: var(--text); letter-spacing: -0.01em; }
    .logo em { color: var(--accent); font-style: italic; }

    .ws-pill {
      display: flex; align-items: center; gap: 6px;
      font-family: var(--mono); font-size: 0.65rem; color: var(--text-dim);
      text-transform: uppercase; letter-spacing: 0.08em;
      background: var(--bg-warm); border: 1px solid var(--border);
      padding: 4px 10px; border-radius: 20px;
    }
    .ws-dot { width: 5px; height: 5px; border-radius: 50%; background: var(--text-dim); transition: all 0.3s; }
    .ws-dot.online { background: var(--green); box-shadow: 0 0 5px var(--green); animation: blink 2s infinite; }
    .ws-dot.error  { background: var(--red); }
    @keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.3} }

    /* â”€â”€ VIEWS â”€â”€ */
    .view { display: none; }
    .view.active { display: block; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LANDING
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    #view-home { min-height: 100vh; }

    .hero {
      max-width: 960px; margin: 0 auto;
      padding: 80px 40px 60px;
      display: grid; grid-template-columns: 1fr 1fr;
      gap: 60px; align-items: center;
    }

    .hero-eyebrow {
      font-family: var(--mono); font-size: 0.7rem; color: var(--accent);
      text-transform: uppercase; letter-spacing: 0.15em; margin-bottom: 16px;
      display: flex; align-items: center; gap: 8px;
    }
    .hero-eyebrow::before { content:''; width:20px; height:1px; background: var(--accent); }

    .hero h1 { font-family: var(--serif); font-size: 3.2rem; font-weight: 600; line-height: 1.1; letter-spacing: -0.02em; margin-bottom: 20px; }
    .hero h1 em { font-style: italic; color: var(--accent); }

    .hero-desc { color: var(--text-mid); font-size: 1rem; line-height: 1.7; margin-bottom: 32px; max-width: 380px; }

    .hero-actions { display: flex; gap: 12px; flex-wrap: wrap; }

    .btn-primary {
      background: var(--text); color: var(--bg); border: 1px solid var(--text);
      padding: 12px 24px; border-radius: 4px; font-family: var(--sans);
      font-size: 0.9rem; font-weight: 500; cursor: pointer; transition: all 0.15s;
    }
    .btn-primary:hover { background: var(--accent); border-color: var(--accent); }

    .btn-outline {
      background: transparent; color: var(--text-mid); border: 1px solid var(--border-dark);
      padding: 12px 24px; border-radius: 4px; font-family: var(--sans);
      font-size: 0.9rem; font-weight: 400; cursor: pointer; transition: all 0.15s;
    }
    .btn-outline:hover { border-color: var(--text); color: var(--text); }

    /* Hero mock */
    .hero-phone-mock {
      background: var(--surface); border: 1px solid var(--border); border-radius: 12px;
      padding: 20px; position: relative;
      box-shadow: 0 8px 40px rgba(44,36,22,0.08), 0 2px 8px rgba(44,36,22,0.06);
    }
    .mock-screen {
      background: var(--text); border-radius: 6px; aspect-ratio: 16/9;
      display: flex; align-items: center; justify-content: center;
      position: relative; overflow: hidden; margin-bottom: 12px;
    }
    .mock-live-badge {
      position: absolute; top: 8px; left: 8px;
      background: var(--red); color: #fff;
      font-family: var(--mono); font-size: 0.55rem; padding: 3px 7px;
      border-radius: 3px; text-transform: uppercase; letter-spacing: 0.1em;
      display: flex; align-items: center; gap: 4px;
    }
    .mock-live-badge::before { content:''; width:4px; height:4px; border-radius:50%; background:#fff; animation: blink 1s infinite; }
    .mock-camera-icon { font-size: 2.5rem; opacity: 0.15; }
    .mock-info { display: flex; justify-content: space-between; align-items: center; }
    .mock-label { font-family: var(--mono); font-size: 0.65rem; color: var(--text-dim); }
    .mock-code { font-family: var(--mono); font-size: 0.9rem; color: var(--accent); letter-spacing: 0.2em; font-weight: 500; }

    .hero-float-tag {
      position: absolute; background: var(--surface); border: 1px solid var(--border);
      border-radius: 8px; padding: 8px 12px; font-size: 0.75rem; color: var(--text-mid);
      box-shadow: 0 4px 16px rgba(44,36,22,0.08); white-space: nowrap;
    }
    .hero-float-tag.tag1 { top: -10px; right: -20px; }
    .hero-float-tag.tag2 { bottom: 10px; left: -24px; }
    .hero-float-tag strong { color: var(--text); font-weight: 500; }
    .hero-visual { position: relative; }

    /* Sections */
    .section { max-width: 960px; margin: 0 auto; padding: 60px 40px; }
    .section-divider { border: none; border-top: 1px solid var(--border); max-width: 960px; margin: 0 auto; }
    .section-label { font-family: var(--mono); font-size: 0.65rem; color: var(--accent); text-transform: uppercase; letter-spacing: 0.15em; margin-bottom: 12px; }
    .section h2 { font-family: var(--serif); font-size: 2rem; font-weight: 600; letter-spacing: -0.02em; margin-bottom: 40px; }

    /* Steps */
    .steps { display: grid; grid-template-columns: repeat(3,1fr); gap: 2px; background: var(--border); border: 1px solid var(--border); }
    .step { background: var(--surface); padding: 28px 24px; }
    .step-num { font-family: var(--serif); font-size: 2.5rem; font-weight: 600; color: var(--border-dark); line-height: 1; margin-bottom: 14px; }
    .step h3 { font-size: 0.95rem; font-weight: 600; margin-bottom: 8px; }
    .step p { font-size: 0.85rem; color: var(--text-mid); line-height: 1.6; }

    /* Features */
    .features { display: grid; grid-template-columns: repeat(3,1fr); gap: 16px; }
    .feature-card { background: var(--surface); border: 1px solid var(--border); border-radius: 6px; padding: 22px 20px; transition: border-color 0.2s; }
    .feature-card:hover { border-color: var(--border-dark); }
    .feature-icon { font-size: 1.4rem; margin-bottom: 12px; display: block; }
    .feature-card h3 { font-size: 0.9rem; font-weight: 600; margin-bottom: 6px; }
    .feature-card p { font-size: 0.82rem; color: var(--text-mid); line-height: 1.6; }

    /* Tech strip */
    .tech-strip { background: var(--bg-warm); border-top: 1px solid var(--border); border-bottom: 1px solid var(--border); padding: 28px 40px; }
    .tech-strip-inner { max-width: 960px; margin: 0 auto; display: flex; align-items: center; gap: 40px; flex-wrap: wrap; }
    .tech-label { font-family: var(--mono); font-size: 0.65rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.1em; white-space: nowrap; }
    .tech-items { display: flex; gap: 8px; flex-wrap: wrap; }
    .tech-tag { background: var(--surface); border: 1px solid var(--border); border-radius: 20px; padding: 4px 12px; font-family: var(--mono); font-size: 0.68rem; color: var(--text-mid); }

    /* FAQ */
    .faq-list { border: 1px solid var(--border); }
    .faq-item { border-bottom: 1px solid var(--border); padding: 20px 24px; }
    .faq-item:last-child { border-bottom: none; }
    .faq-q { font-size: 0.9rem; font-weight: 500; margin-bottom: 6px; }
    .faq-a { font-size: 0.85rem; color: var(--text-mid); line-height: 1.6; }

    /* Footer */
    footer { border-top: 1px solid var(--border); padding: 28px 40px; display: flex; justify-content: space-between; align-items: center; }
    .footer-logo { font-family: var(--serif); font-size: 1rem; font-weight: 600; color: var(--text-mid); }
    .footer-logo em { color: var(--accent); font-style: italic; }
    .footer-note { font-family: var(--mono); font-size: 0.62rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.08em; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SESSION CARD SHELL
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .session-page { min-height: 100vh; background: var(--bg); display: flex; flex-direction: column; }
    .session-main { flex: 1; display: flex; align-items: center; justify-content: center; padding: 40px 24px; }

    .session-card {
      background: var(--surface); border: 1px solid var(--border); border-radius: 8px;
      width: 100%; max-width: 460px;
      box-shadow: 0 4px 24px rgba(44,36,22,0.06); overflow: hidden;
    }
    .session-card-top { padding: 28px 32px 24px; border-bottom: 1px solid var(--border); background: var(--bg-warm); }
    .session-card-eyebrow { font-family: var(--mono); font-size: 0.62rem; color: var(--accent); text-transform: uppercase; letter-spacing: 0.12em; margin-bottom: 6px; }
    .session-card-title { font-family: var(--serif); font-size: 1.6rem; font-weight: 600; line-height: 1.2; }
    .session-card-body { padding: 28px 32px; }

    /* Session buttons */
    .s-btn { display: block; width: 100%; padding: 13px 20px; border-radius: 4px; font-family: var(--sans); font-size: 0.88rem; font-weight: 500; cursor: pointer; transition: all 0.15s; text-align: center; border: 1px solid transparent; }
    .s-btn-primary { background: var(--text); color: var(--bg); border-color: var(--text); }
    .s-btn-primary:hover { background: var(--accent); border-color: var(--accent); }
    .s-btn-primary:disabled { opacity: 0.4; cursor: not-allowed; }
    .s-btn-outline { background: transparent; color: var(--text-mid); border-color: var(--border-dark); font-weight: 400; }
    .s-btn-outline:hover { color: var(--text); border-color: var(--text); }
    .s-btn-danger { background: transparent; color: var(--red); border-color: #e8c4c0; }
    .s-btn-danger:hover { background: var(--red-bg); }
    .s-btn-stack { display: flex; flex-direction: column; gap: 10px; }
    .s-btn-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }

    /* Code block */
    .code-block { background: var(--bg-warm); border: 1px solid var(--border); border-radius: 6px; padding: 18px; text-align: center; margin-bottom: 20px; }
    .code-block-label { font-family: var(--mono); font-size: 0.6rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 8px; }
    .code-value { font-family: var(--mono); font-size: 2.8rem; color: var(--accent); letter-spacing: 0.35em; line-height: 1; font-weight: 500; }
    .code-value.loading { animation: blink 1.2s step-end infinite; }

    /* QR */
    .qr-area { display: flex; flex-direction: column; align-items: center; gap: 10px; margin-bottom: 20px; }
    .qr-box { background: #fff; padding: 12px; border: 1px solid var(--border); border-radius: 6px; display: inline-flex; }
    .qr-placeholder { width: 148px; height: 148px; background: var(--bg-warm); border-radius: 3px; display: flex; align-items: center; justify-content: center; font-family: var(--mono); font-size: 0.6rem; color: var(--text-dim); }
    .qr-caption { font-size: 0.75rem; color: var(--text-dim); text-align: center; }

    .or-divider { display: flex; align-items: center; gap: 12px; font-family: var(--mono); font-size: 0.62rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.1em; margin: 16px 0; }
    .or-divider::before, .or-divider::after { content:''; flex:1; height:1px; background: var(--border); }

    /* Input */
    .s-label { display: block; font-family: var(--mono); font-size: 0.62rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 8px; }
    .s-input { width: 100%; background: var(--bg-warm); border: 1px solid var(--border-dark); border-radius: 4px; color: var(--accent); font-family: var(--mono); font-size: 2rem; letter-spacing: 0.25em; padding: 14px 16px; outline: none; text-align: center; transition: border-color 0.2s; margin-bottom: 16px; }
    .s-input:focus { border-color: var(--accent); }
    .s-input::placeholder { color: var(--border-dark); }

    /* Status */
    .s-status { font-size: 0.8rem; padding: 10px 14px; border-radius: 4px; margin-bottom: 16px; border-left: 3px solid; line-height: 1.5; }
    .s-status.info    { background: var(--bg-warm); border-color: var(--border-dark); color: var(--text-mid); }
    .s-status.success { background: var(--green-bg); border-color: var(--green); color: var(--green); }
    .s-status.warn    { background: var(--accent-bg); border-color: var(--accent-light); color: var(--accent); }
    .s-status.error   { background: var(--red-bg); border-color: var(--red); color: var(--red); }

    /* Waiting */
    .waiting-row { display: flex; align-items: center; gap: 10px; font-family: var(--mono); font-size: 0.62rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.08em; margin-top: 16px; }
    .waiting-track { flex:1; height:2px; background: var(--border); border-radius: 2px; overflow: hidden; }
    .waiting-track::after { content:''; display:block; width:40%; height:100%; background: var(--accent-light); animation: slide 1.8s ease-in-out infinite; }
    @keyframes slide { 0%{transform:translateX(-100%)} 100%{transform:translateX(350%)} }

    /* â”€â”€ STREAM VIEWS â”€â”€ */
    .stream-layout { max-width: 900px; width: 100%; }
    .stream-header-bar { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }
    .stream-title { font-family: var(--serif); font-size: 1.1rem; font-weight: 600; }

    .live-pill { display: flex; align-items: center; gap: 6px; background: var(--red-bg); border: 1px solid #e8c4c0; border-radius: 20px; padding: 4px 10px; font-family: var(--mono); font-size: 0.62rem; color: var(--red); text-transform: uppercase; letter-spacing: 0.08em; }
    .live-pill::before { content:''; width:5px; height:5px; border-radius:50%; background: var(--red); animation: blink 1s infinite; }

    .video-frame { background: #1a1610; border: 1px solid var(--border); border-radius: 8px; aspect-ratio: 16/9; overflow: hidden; position: relative; margin-bottom: 14px; }
    video#remoteVideo { width:100%; height:100%; object-fit: contain; display: block; }
    .video-overlay { position: absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:10px; background:#1a1610; transition: opacity 0.5s; }
    .video-overlay.hidden { opacity:0; pointer-events:none; }
    .overlay-icon { font-size:2.5rem; opacity:0.2; }
    .overlay-text { font-family: var(--mono); font-size:0.7rem; color:#6b5f4e; text-transform:uppercase; letter-spacing:0.1em; }

    .stream-controls { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 12px; }

    /* Mobile stream */
    .mobile-stream-layout { max-width: 380px; width: 100%; }
    .camera-frame { position: relative; aspect-ratio: 9/16; background: #1a1610; border: 1px solid var(--border); border-radius: 12px; overflow: hidden; margin-bottom: 14px; }
    video#localVideo { width:100%; height:100%; object-fit:cover; transform: scaleX(-1); }
    .camera-frame-corner { position:absolute; width:18px; height:18px; }
    .camera-frame-corner.tl { top:10px; left:10px; border-top:2px solid var(--accent-light); border-left:2px solid var(--accent-light); }
    .camera-frame-corner.tr { top:10px; right:10px; border-top:2px solid var(--accent-light); border-right:2px solid var(--accent-light); }
    .camera-frame-corner.bl { bottom:10px; left:10px; border-bottom:2px solid var(--accent-light); border-left:2px solid var(--accent-light); }
    .camera-frame-corner.br { bottom:10px; right:10px; border-bottom:2px solid var(--accent-light); border-right:2px solid var(--accent-light); }
    .camera-hud { position:absolute; top:12px; left:12px; right:12px; display:flex; justify-content:space-between; }
    .hud-tag { background:rgba(26,22,16,0.65); backdrop-filter:blur(4px); color:#d4c4a8; font-family:var(--mono); font-size:0.58rem; padding:3px 8px; border-radius:3px; text-transform:uppercase; letter-spacing:0.08em; }

    /* â”€â”€ RESPONSIVE â”€â”€ */
    @media (max-width:720px) {
      header { padding: 0 20px; }
      .hero { grid-template-columns:1fr; padding:48px 20px 40px; gap:40px; }
      .hero h1 { font-size:2.4rem; }
      .hero-visual { display:none; }
      .section { padding:48px 20px; }
      .steps { grid-template-columns:1fr; }
      .features { grid-template-columns:1fr 1fr; }
      footer { flex-direction:column; gap:8px; padding:20px; }
      .session-card-top, .session-card-body { padding:20px; }
      .tech-strip { padding:20px; }
    }
    @media (max-width:480px) {
      .features { grid-template-columns:1fr; }
      .hero h1 { font-size:2rem; }
    }

    @keyframes fade-up { from{opacity:0;transform:translateY(14px)} to{opacity:1;transform:translateY(0)} }
    .animate-in { animation: fade-up 0.45s ease forwards; }
  </style>
</head>
<body>
<div id="app">

  <header>
    <div class="logo">Phone<em>Cam</em></div>
    <div class="ws-pill">
      <div class="ws-dot" id="wsStatus"></div>
      <span id="wsStatusText">connecting</span>
    </div>
  </header>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• VIEW: HOME -->
  <div id="view-home" class="view active">

    <div class="hero">
      <div>
        <div class="hero-eyebrow">WebRTC Â· P2P Â· Zero latency</div>
        <h1>Your phone,<br>as a <em>webcam.</em></h1>
        <p class="hero-desc">Turn any smartphone into a high-quality webcam for your laptop â€” instantly. No apps, no cables, no drivers. Just open a browser on both devices and go.</p>
        <div class="hero-actions">
          <button class="btn-primary" id="btnGoLaptop">ğŸ’» &nbsp;I'm on Laptop</button>
          <button class="btn-outline" id="btnGoMobile">ğŸ“± &nbsp;I'm on Phone</button>
        </div>
      </div>
      <div class="hero-visual">
        <div class="hero-phone-mock">
          <div class="mock-screen">
            <div class="mock-live-badge">Live</div>
            <div class="mock-camera-icon">ğŸ“·</div>
          </div>
          <div class="mock-info">
            <span class="mock-label">Session active</span>
            <span class="mock-code">4 8 2 1 9 3</span>
          </div>
        </div>
        <div class="hero-float-tag tag1">ğŸ”’ <strong>End-to-end encrypted</strong></div>
        <div class="hero-float-tag tag2">âš¡ <strong>P2P</strong> â€” video never hits server</div>
      </div>
    </div>

    <hr class="section-divider"/>

    <div class="section">
      <div class="section-label">How it works</div>
      <h2>Three steps to go live</h2>
      <div class="steps">
        <div class="step">
          <div class="step-num">01</div>
          <h3>Create a session</h3>
          <p>Open PhoneCam on your laptop and click "I'm on Laptop". You'll get a unique 6-digit code and a QR code instantly.</p>
        </div>
        <div class="step">
          <div class="step-num">02</div>
          <h3>Scan from phone</h3>
          <p>Point your phone camera at the QR code. The page opens automatically â€” no typing, no app install required.</p>
        </div>
        <div class="step">
          <div class="step-num">03</div>
          <h3>Start streaming</h3>
          <p>Allow camera access on your phone. Your video appears on the laptop screen in real-time via a direct P2P connection.</p>
        </div>
      </div>
    </div>

    <hr class="section-divider"/>

    <div class="section">
      <div class="section-label">Features</div>
      <h2>Everything you need</h2>
      <div class="features">
        <div class="feature-card">
          <span class="feature-icon">ğŸŒ</span>
          <h3>Works across networks</h3>
          <p>Phone on mobile data, laptop on WiFi â€” doesn't matter. STUN/TURN servers handle NAT traversal automatically.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon">ğŸ”’</span>
          <h3>Secure by default</h3>
          <p>All video is encrypted end-to-end via WebRTC DTLS. Your stream never passes through any server.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon">âš¡</span>
          <h3>Ultra low latency</h3>
          <p>Direct peer-to-peer connection means minimal delay. No upload â†’ server â†’ download roundtrip.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon">ğŸ“±</span>
          <h3>Front &amp; rear camera</h3>
          <p>Tap the flip button to switch between front and rear camera at any time without disconnecting.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon">ğŸš€</span>
          <h3>No install needed</h3>
          <p>Works entirely in the browser. No apps, no drivers, no plugins. Just a URL on both devices.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon">ğŸ¯</span>
          <h3>QR instant connect</h3>
          <p>Scan the QR code on your laptop screen â€” your phone auto-connects without typing anything.</p>
        </div>
      </div>
    </div>

    <div class="tech-strip">
      <div class="tech-strip-inner">
        <span class="tech-label">Built with</span>
        <div class="tech-items">
          <span class="tech-tag">WebRTC</span>
          <span class="tech-tag">WebSocket</span>
          <span class="tech-tag">STUN / TURN</span>
          <span class="tech-tag">Node.js</span>
          <span class="tech-tag">P2P</span>
          <span class="tech-tag">DTLS encryption</span>
        </div>
      </div>
    </div>

    <div class="section">
      <div class="section-label">FAQ</div>
      <h2>Common questions</h2>
      <div class="faq-list">
        <div class="faq-item">
          <div class="faq-q">Does the video go through a server?</div>
          <div class="faq-a">No. Once connected, video streams directly between your devices via WebRTC P2P. The server is only used during the initial handshake to exchange connection details.</div>
        </div>
        <div class="faq-item">
          <div class="faq-q">Do phone and laptop need to be on the same network?</div>
          <div class="faq-a">No. PhoneCam works even when your phone is on mobile data and your laptop is on a different WiFi network. STUN/TURN servers handle NAT traversal automatically.</div>
        </div>
        <div class="faq-item">
          <div class="faq-q">Can I use it as a virtual webcam in Zoom or Meet?</div>
          <div class="faq-a">Not directly â€” the stream appears in your browser. To use it as a system webcam you'd need OBS Virtual Camera, which you can feed with a screen capture of the browser window.</div>
        </div>
        <div class="faq-item">
          <div class="faq-q">Is there a time limit or session limit?</div>
          <div class="faq-a">No. Sessions last as long as both devices keep the browser open. There's no artificial time limit or session cap.</div>
        </div>
      </div>
    </div>

    <footer>
      <div class="footer-logo">Phone<em>Cam</em></div>
      <div class="footer-note">Video is peer-to-peer Â· Never stored Â· Never recorded</div>
    </footer>

  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• VIEW: LAPTOP WAIT -->
  <div id="view-laptop-wait" class="view">
    <div class="session-page">
      <div class="session-main">
        <div class="session-card animate-in">
          <div class="session-card-top">
            <div class="session-card-eyebrow">Laptop Â· Step 1 of 2</div>
            <div class="session-card-title">Scan from your phone</div>
          </div>
          <div class="session-card-body">
            <div class="qr-area">
              <div class="qr-box">
                <div id="qrPlaceholder" class="qr-placeholder">generatingâ€¦</div>
                <div id="qrCode" style="display:none"></div>
              </div>
              <div class="qr-caption">Point your phone camera at this QR code</div>
            </div>
            <div class="or-divider">or enter code manually</div>
            <div class="code-block">
              <div class="code-block-label">6-digit session code</div>
              <div class="code-value loading" id="sessionCode">------</div>
            </div>
            <div class="s-status info" id="laptopStatus">Generating sessionâ€¦</div>
            <div class="waiting-row" id="waitingIndicator" style="display:none">
              <span>Waiting for phone</span>
              <div class="waiting-track"></div>
            </div>
            <div style="margin-top:20px">
              <button class="s-btn s-btn-outline" id="btnLaptopBack">â† Back to home</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• VIEW: MOBILE JOIN -->
  <div id="view-mobile-join" class="view">
    <div class="session-page">
      <div class="session-main">
        <div class="session-card animate-in">
          <div class="session-card-top">
            <div class="session-card-eyebrow">Phone Â· Step 1 of 2</div>
            <div class="session-card-title">Enter session code</div>
          </div>
          <div class="session-card-body">
            <label class="s-label" for="codeInput">6-digit code from laptop</label>
            <input class="s-input" id="codeInput" type="tel" maxlength="6" placeholder="000000" autocomplete="off" inputmode="numeric"/>
            <div class="s-status error" id="joinError" style="display:none"></div>
            <div class="s-btn-stack">
              <button class="s-btn s-btn-primary" id="btnJoin">Connect â†’</button>
              <button class="s-btn s-btn-outline" id="btnMobileBack">â† Back</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• VIEW: LAPTOP STREAM -->
  <div id="view-laptop-stream" class="view">
    <div class="session-page">
      <div class="session-main">
        <div class="stream-layout animate-in">
          <div class="stream-header-bar">
            <div class="stream-title">Live Camera Feed</div>
            <div class="live-pill" id="liveBadge" style="display:none">Live</div>
          </div>
          <div class="video-frame">
            <video id="remoteVideo" autoplay playsinline></video>
            <div class="video-overlay" id="videoOverlay">
              <div class="overlay-icon">ğŸ“·</div>
              <div class="overlay-text">Waiting for camera streamâ€¦</div>
            </div>
          </div>
          <div class="stream-controls">
            <button class="s-btn s-btn-danger" id="btnLaptopDisconnect">â¹ Disconnect</button>
            <button class="s-btn s-btn-outline" id="btnLaptopCopyCode">â˜ Copy code</button>
          </div>
          <div class="s-status info" id="streamStatus"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• VIEW: MOBILE STREAM -->
  <div id="view-mobile-stream" class="view">
    <div class="session-page">
      <div class="session-main">
        <div class="mobile-stream-layout animate-in">
          <div class="camera-frame">
            <video id="localVideo" autoplay playsinline muted></video>
            <div class="camera-frame-corner tl"></div>
            <div class="camera-frame-corner tr"></div>
            <div class="camera-frame-corner bl"></div>
            <div class="camera-frame-corner br"></div>
            <div class="camera-hud">
              <div class="hud-tag">â— Streaming</div>
              <div class="hud-tag" id="mHudCode"></div>
            </div>
          </div>
          <div class="s-btn-stack">
            <button class="s-btn s-btn-outline" id="btnFlipCamera">ğŸ”„ Flip camera</button>
            <button class="s-btn s-btn-danger" id="btnMobileStop">â¹ Stop &amp; disconnect</button>
          </div>
          <div class="s-status info" id="mobileStreamStatus" style="margin-top:12px"></div>
        </div>
      </div>
    </div>
  </div>

</div>
<script>
const ICE_SERVERS = [
  { urls: 'stun:stun.l.google.com:19302' },
  { urls: 'stun:stun1.l.google.com:19302' },
  { urls: 'stun:stun2.l.google.com:19302' },
  { urls: 'stun:stun3.l.google.com:19302' },
  { urls: 'stun:stun4.l.google.com:19302' },
  { urls: 'stun:stun.cloudflare.com:3478' },
  { urls: 'stun:stun.relay.metered.ca:80' },
  { urls: 'turn:openrelay.metered.ca:80', username: 'openrelayproject', credential: 'openrelayproject' },
  { urls: 'turn:openrelay.metered.ca:443', username: 'openrelayproject', credential: 'openrelayproject' },
  { urls: 'turn:openrelay.metered.ca:443?transport=tcp', username: 'openrelayproject', credential: 'openrelayproject' },
  { urls: 'turns:openrelay.metered.ca:443?transport=tcp', username: 'openrelayproject', credential: 'openrelayproject' }
];

let ws=null, pc=null, localStream=null, currentFacingMode='environment', sessionCode=null, role=null, heartbeatInterval=null;

function showView(id) {
  document.querySelectorAll('.view').forEach(v => { v.classList.remove('active'); v.querySelectorAll('.animate-in').forEach(el => el.style.animation='none'); });
  const el = document.getElementById(id);
  el.classList.add('active');
  requestAnimationFrame(() => el.querySelectorAll('.animate-in').forEach(el => el.style.animation=''));
}

function wsUrl() { return `${location.protocol==='https:'?'wss:':'ws:'}//${location.host}`; }

function connectWS() {
  const dot = document.getElementById('wsStatus'), txt = document.getElementById('wsStatusText');
  dot.className='ws-dot'; txt.textContent='connecting';
  ws = new WebSocket(wsUrl());
  ws.onopen = () => { dot.className='ws-dot online'; txt.textContent='connected'; startHeartbeat(); };
  ws.onclose = () => { dot.className='ws-dot error'; txt.textContent='offline'; stopHeartbeat(); setTimeout(connectWS,3000); };
  ws.onerror = () => { dot.className='ws-dot error'; txt.textContent='error'; };
  ws.onmessage = (e) => { let msg; try{msg=JSON.parse(e.data);}catch{return;} handleServerMsg(msg); };
}

function wsSend(obj) { if(ws&&ws.readyState===WebSocket.OPEN) ws.send(JSON.stringify(obj)); }
function startHeartbeat() { stopHeartbeat(); heartbeatInterval=setInterval(()=>wsSend({type:'ping'}),20000); }
function stopHeartbeat() { clearInterval(heartbeatInterval); }

async function handleServerMsg(msg) {
  switch(msg.type) {
    case 'session-created':
      sessionCode=msg.code;
      document.getElementById('sessionCode').textContent=msg.code;
      document.getElementById('sessionCode').classList.remove('loading');
      setLaptopStatus('success','âœ“ Session ready â€” scan the QR or enter the code on your phone.');
      document.getElementById('waitingIndicator').style.display='flex';
      generateQR(msg.code);
      break;
    case 'peer-joined':
      setLaptopStatus('warn','Phone connected â€” establishing video linkâ€¦');
      document.getElementById('waitingIndicator').style.display='none';
      await initPCLaptop();
      break;
    case 'session-joined':
      sessionCode=msg.code;
      document.getElementById('mHudCode').textContent=msg.code;
      await initPCMobile();
      break;
    case 'error':
      if(role==='mobile'){
        document.getElementById('joinError').textContent=`âš  ${msg.message}`;
        document.getElementById('joinError').style.display='block';
        document.getElementById('btnJoin').disabled=false;
      }
      break;
    case 'offer':   await handleOffer(msg); break;
    case 'answer':  await pc.setRemoteDescription(new RTCSessionDescription({type:'answer',sdp:msg.sdp})); break;
    case 'ice-candidate':
      if(msg.candidate){try{await pc.addIceCandidate(new RTCIceCandidate(msg.candidate));}catch{}} break;
    case 'peer-disconnected': handlePeerDisconnect(); break;
  }
}

async function initPCLaptop() {
  pc=createPeerConnection('laptop');
  pc.addTransceiver('video',{direction:'recvonly'});
  const offer=await pc.createOffer();
  await pc.setLocalDescription(offer);
  await waitForICEGathering(pc);
  wsSend({type:'offer',sdp:pc.localDescription.sdp});
  setLaptopStatus('warn','Negotiating connectionâ€¦');
  showView('view-laptop-stream');
}

async function initPCMobile() {
  try {
    localStream=await navigator.mediaDevices.getUserMedia({video:{facingMode:currentFacingMode,width:{ideal:1280},height:{ideal:720}},audio:false});
    document.getElementById('localVideo').srcObject=localStream;
    setMobileStatus('success','âœ“ Camera on â€” connecting to laptopâ€¦');
    showView('view-mobile-stream');
  } catch(err) {
    document.getElementById('joinError').textContent=`âš  Camera access denied: ${err.message}`;
    document.getElementById('joinError').style.display='block';
    return;
  }
  pc=createPeerConnection('mobile');
  localStream.getTracks().forEach(t=>pc.addTrack(t,localStream));
}

async function handleOffer(msg) {
  await pc.setRemoteDescription(new RTCSessionDescription({type:'offer',sdp:msg.sdp}));
  const answer=await pc.createAnswer();
  await pc.setLocalDescription(answer);
  await waitForICEGathering(pc);
  wsSend({type:'answer',sdp:pc.localDescription.sdp});
  setMobileStatus('success','âœ“ Streaming to laptopâ€¦');
}

function waitForICEGathering(conn) {
  return new Promise(resolve => {
    if(conn.iceGatheringState==='complete'){resolve();return;}
    const check=()=>{if(conn.iceGatheringState==='complete'){conn.removeEventListener('icegatheringstatechange',check);resolve();}};
    conn.addEventListener('icegatheringstatechange',check);
    setTimeout(resolve,4000);
  });
}

function createPeerConnection(forRole) {
  const conn=new RTCPeerConnection({iceServers:ICE_SERVERS});
  conn.onicecandidate=(e)=>{if(e.candidate)wsSend({type:'ice-candidate',candidate:e.candidate});};
  conn.ontrack=(e)=>{
    if(forRole==='laptop'&&e.streams[0]){
      document.getElementById('remoteVideo').srcObject=e.streams[0];
      document.getElementById('videoOverlay').classList.add('hidden');
      document.getElementById('liveBadge').style.display='flex';
      setLaptopStatus('success','âœ“ Live â€” video is streaming peer-to-peer.');
    }
  };
  conn.onconnectionstatechange=()=>{
    const s=conn.connectionState;
    console.log(`[PhoneCam] connectionState â†’ ${s}`);
    if(forRole==='laptop'){
      if(s==='connecting')   setLaptopStatus('warn','Establishing P2P connectionâ€¦');
      if(s==='connected')    setLaptopStatus('success','âœ“ Connected â€” video is streaming peer-to-peer.');
      if(s==='disconnected') setLaptopStatus('error','âš  Connection lost. Phone may have disconnected.');
      if(s==='failed')       setLaptopStatus('error','âœ— Connection failed. Try creating a new session.');
    }
    if(forRole==='mobile'){
      if(s==='connected') setMobileStatus('success','âœ“ Connected â€” camera is live on laptop.');
      if(s==='disconnected'||s==='failed') setMobileStatus('error','âš  Lost connection to laptop.');
    }
  };
  conn.oniceconnectionstatechange=()=>{
    console.log(`[PhoneCam] iceConnectionState â†’ ${conn.iceConnectionState}`);
    if(forRole==='laptop'&&conn.iceConnectionState==='checking') setLaptopStatus('warn','Finding network path to phoneâ€¦');
    if(forRole==='laptop'&&conn.iceConnectionState==='failed')   setLaptopStatus('error','âœ— Network traversal failed. Try refreshing.');
  };
  conn.onicegatheringstatechange=()=>console.log(`[PhoneCam] iceGatheringState â†’ ${conn.iceGatheringState}`);
  return conn;
}

function stopLocalStream(){if(localStream){localStream.getTracks().forEach(t=>t.stop());localStream=null;}}
function closePC(){if(pc){pc.close();pc=null;}}

function resetToHome(){
  stopLocalStream();closePC();
  sessionCode=null;role=null;
  document.getElementById('remoteVideo').srcObject=null;
  document.getElementById('localVideo').srcObject=null;
  document.getElementById('videoOverlay').classList.remove('hidden');
  document.getElementById('liveBadge').style.display='none';
  document.getElementById('sessionCode').textContent='------';
  document.getElementById('sessionCode').classList.add('loading');
  document.getElementById('codeInput').value='';
  document.getElementById('joinError').style.display='none';
  document.getElementById('qrCode').style.display='none';
  document.getElementById('qrPlaceholder').style.display='flex';
  showView('view-home');
}

function handlePeerDisconnect(){
  if(role==='laptop'){setLaptopStatus('error','âš  Phone disconnected. Session ended.');document.getElementById('videoOverlay').classList.remove('hidden');document.getElementById('liveBadge').style.display='none';closePC();}
  if(role==='mobile'){setMobileStatus('error','âš  Laptop disconnected.');stopLocalStream();closePC();}
}

function setLaptopStatus(type,html){
  ['laptopStatus','streamStatus'].forEach(id=>{const el=document.getElementById(id);if(el){el.className=`s-status ${type}`;el.innerHTML=html;}});
}
function setMobileStatus(type,html){const el=document.getElementById('mobileStreamStatus');if(el){el.className=`s-status ${type}`;el.innerHTML=html;}}

async function flipCamera(){
  currentFacingMode=currentFacingMode==='environment'?'user':'environment';
  stopLocalStream();
  try{
    localStream=await navigator.mediaDevices.getUserMedia({video:{facingMode:currentFacingMode,width:{ideal:1280},height:{ideal:720}},audio:false});
    document.getElementById('localVideo').srcObject=localStream;
    if(pc){const s=pc.getSenders().find(s=>s.track?.kind==='video');if(s)s.replaceTrack(localStream.getVideoTracks()[0]);}
  }catch{currentFacingMode=currentFacingMode==='environment'?'user':'environment';}
}

function generateQR(code){
  const url=`${location.origin}${location.pathname}?join=${code}`;
  document.getElementById('qrPlaceholder').style.display='none';
  const c=document.getElementById('qrCode');c.style.display='block';c.innerHTML='';
  new QRCode(c,{text:url,width:148,height:148,colorDark:'#2c2416',colorLight:'#ffffff',correctLevel:QRCode.CorrectLevel.M});
}

function checkAutoJoin(){
  const code=new URLSearchParams(location.search).get('join');
  if(!code||!/^\d{6}$/.test(code))return;
  role='mobile';showView('view-mobile-join');
  document.getElementById('codeInput').value=code;
  function tryJoin(){
    if(ws&&ws.readyState===WebSocket.OPEN){document.getElementById('btnJoin').disabled=true;wsSend({type:'join-session',code});history.replaceState({},'',location.pathname);}
    else setTimeout(tryJoin,200);
  }
  tryJoin();
}

document.getElementById('btnGoLaptop').onclick=()=>{role='laptop';showView('view-laptop-wait');wsSend({type:'create-session'});};
document.getElementById('btnGoMobile').onclick=()=>{role='mobile';showView('view-mobile-join');};
document.getElementById('btnJoin').onclick=()=>{
  const code=document.getElementById('codeInput').value.trim();
  if(code.length!==6||!/^\d{6}$/.test(code)){document.getElementById('joinError').textContent='âš  Please enter a valid 6-digit code.';document.getElementById('joinError').style.display='block';return;}
  document.getElementById('joinError').style.display='none';document.getElementById('btnJoin').disabled=true;wsSend({type:'join-session',code});
};
document.getElementById('codeInput').addEventListener('input',e=>e.target.value=e.target.value.replace(/\D/g,'').slice(0,6));
document.getElementById('codeInput').addEventListener('keydown',e=>{if(e.key==='Enter')document.getElementById('btnJoin').click();});
document.getElementById('btnLaptopBack').onclick=resetToHome;
document.getElementById('btnMobileBack').onclick=resetToHome;
document.getElementById('btnLaptopDisconnect').onclick=resetToHome;
document.getElementById('btnMobileStop').onclick=resetToHome;
document.getElementById('btnFlipCamera').onclick=flipCamera;
document.getElementById('btnLaptopCopyCode').onclick=()=>{
  if(!sessionCode)return;
  navigator.clipboard.writeText(sessionCode).then(()=>{
    const btn=document.getElementById('btnLaptopCopyCode');btn.textContent='âœ“ Copied!';
    setTimeout(()=>btn.textContent='â˜ Copy code',2000);
  });
};

connectWS();
checkAutoJoin();
</script>
</body>
</html>
